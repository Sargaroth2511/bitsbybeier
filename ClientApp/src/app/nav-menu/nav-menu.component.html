<header>
  <mat-toolbar color="primary" class="navbar-toolbar">
    <div class="toolbar-container">
      <!-- Brand/Logo -->
      <a mat-button class="brand-link" [routerLink]="['/']">
        <span class="brand-text">bitsbybeier</span>
      </a>

      <!-- Spacer for mobile -->
      <span class="toolbar-spacer"></span>

      <!-- Desktop Navigation -->
      <nav class="desktop-nav">
        <a mat-button [routerLink]="['/blog']">
          Blog
        </a>
        @if (isAuthenticated() && isAdmin()) {
          <a mat-button [routerLink]="['/drafts']">
            Drafts
          </a>
          <a mat-button [routerLink]="['/cms']">
            CMS
          </a>
        }
        @if (!isAuthenticated()) {
          <a mat-button [routerLink]="['/login']">
            Login
          </a>
        }
        @if (isAuthenticated() && currentUser()) {
          <span class="user-name">
            {{ currentUser()!.name }}
          </span>
          <button mat-button (click)="logout()" aria-label="Sign out">
            Logout
          </button>
        }
        <button 
          mat-icon-button 
          class="theme-toggle" 
          (click)="toggleTheme()"
          [attr.aria-label]="isDarkMode() ? 'Switch to light mode' : 'Switch to dark mode'"
          [title]="isDarkMode() ? 'Switch to light mode' : 'Switch to dark mode'"
        >
          <span class="theme-icon">{{ isDarkMode() ? '‚òÄÔ∏è' : 'üåô' }}</span>
        </button>
      </nav>

      <!-- Mobile Menu Toggle -->
      <button 
        mat-icon-button 
        class="mobile-menu-button" 
        (click)="toggle()"
        [attr.aria-expanded]="isExpanded"
        aria-label="Toggle navigation"
      >
        <mat-icon>{{ isExpanded ? 'close' : 'menu' }}</mat-icon>
      </button>
    </div>
  </mat-toolbar>

  <!-- Mobile Navigation Drawer -->
  <div class="mobile-nav" [class.mobile-nav-open]="isExpanded">
    <nav class="mobile-nav-content">
      <a mat-list-item [routerLink]="['/blog']" (click)="collapse()">
        Blog
      </a>
      @if (isAuthenticated() && isAdmin()) {
        <a mat-list-item [routerLink]="['/drafts']" (click)="collapse()">
          Drafts
        </a>
        <a mat-list-item [routerLink]="['/cms']" (click)="collapse()">
          CMS
        </a>
      }
      @if (!isAuthenticated()) {
        <a mat-list-item [routerLink]="['/login']" (click)="collapse()">
          Login
        </a>
      }
      @if (isAuthenticated() && currentUser()) {
        <div class="mobile-user-info">
          <span class="user-name">{{ currentUser()!.name }}</span>
        </div>
        <button mat-list-item (click)="logout(); collapse()">
          Logout
        </button>
      }
      <button 
        mat-list-item
        class="theme-toggle-mobile" 
        (click)="toggleTheme()"
        [attr.aria-label]="isDarkMode() ? 'Switch to light mode' : 'Switch to dark mode'"
      >
        <span class="theme-icon">{{ isDarkMode() ? '‚òÄÔ∏è' : 'üåô' }}</span>
        <span class="theme-text">{{ isDarkMode() ? 'Light Mode' : 'Dark Mode' }}</span>
      </button>
    </nav>
  </div>
</header>
