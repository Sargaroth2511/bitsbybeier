<div class="drafts-container">
  <h1>Draft Content Management</h1>
  
  <div class="admin-notice">
    <mat-icon>admin_panel_settings</mat-icon>
    <span>Admin Section - Only visible to administrators</span>
  </div>
  
  @if (loading()) {
    <app-loading-spinner message="Loading drafts..." />
  }
  
  @if (error()) {
    <app-error-display [message]="error()" />
  }
  
  @if (!loading() && !error()) {
    <div class="drafts-list">
      @for (draft of drafts(); track draft.id; let i = $index) {
        <app-blog-post-card 
          [post]="draft" 
          [expanded]="draft.expanded ?? false"
          [showBadge]="true"
          [showScheduled]="true"
          [showToggle]="true"
          (toggleExpanded)="toggleExpanded(i)">
          <div [innerHTML]="draft.content | markdown"></div>
          <div actions class="action-group">
            <button mat-raised-button color="primary" (click)="publishNow(draft)">
              <mat-icon>publish</mat-icon>
              Publish Now
            </button>
            <button mat-raised-button (click)="schedulePublish(draft)">
              <mat-icon>schedule</mat-icon>
              Schedule
            </button>
            <button mat-button (click)="keepAsDraft(draft)">
              <mat-icon>save</mat-icon>
              Keep as Draft
            </button>
            <button mat-button color="warn" (click)="deleteDraft(draft)">
              <mat-icon>delete</mat-icon>
              Delete
            </button>
          </div>
        </app-blog-post-card>
      } @empty {
        <div class="no-drafts">
          <mat-icon>inbox</mat-icon>
          <p>No draft content available.</p>
        </div>
      }
    </div>
  }
</div>
